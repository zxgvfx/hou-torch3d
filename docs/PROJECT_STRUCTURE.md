# é¡¹ç›®ç»“æ„è¯´æ˜

## ä¸ºä»€ä¹ˆè¦åˆ†ç¦»æµ‹è¯•ä»£ç å’Œç”Ÿäº§ä»£ç ï¼Ÿ

### 1. **ä»£ç ç»„ç»‡æ¸…æ™°**
- ç”Ÿäº§ä»£ç ä¸“æ³¨äºåŠŸèƒ½å®ç°
- æµ‹è¯•ä»£ç ä¸“æ³¨äºéªŒè¯åŠŸèƒ½
- ä¾¿äºç»´æŠ¤å’ŒæŸ¥æ‰¾

### 2. **éƒ¨ç½²å®‰å…¨**
- ç”Ÿäº§ç¯å¢ƒä¸éœ€è¦æµ‹è¯•ä»£ç 
- å‡å°‘éƒ¨ç½²åŒ…å¤§å°
- é¿å…æµ‹è¯•ä»£ç æ³„éœ²æ•æ„Ÿä¿¡æ¯

### 3. **ä¾èµ–ç®¡ç†**
- æµ‹è¯•ä¾èµ–ä¸ä¼šæ±¡æŸ“ç”Ÿäº§ç¯å¢ƒ
- å¯ä»¥ä½¿ç”¨ä¸åŒçš„ä¾èµ–ç‰ˆæœ¬
- ä¾¿äºç®¡ç†å¼€å‘å’Œç”Ÿäº§ç¯å¢ƒ

### 4. **ç‰ˆæœ¬æ§åˆ¶**
- å¯ä»¥å•ç‹¬ç®¡ç†æµ‹è¯•ä»£ç çš„ç‰ˆæœ¬
- æµ‹è¯•ä»£ç æ›´æ”¹ä¸å½±å“ç”Ÿäº§ä»£ç æ ‡ç­¾
- ä¾¿äºä»£ç å®¡æŸ¥

## å½“å‰é¡¹ç›®ç»“æ„

```
hou-torch3d/                           # é¡¹ç›®æ ¹ç›®å½•
â”œâ”€â”€ pyLib/                             # ğŸ¯ æ ¸å¿ƒç”Ÿäº§ä»£ç 
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ toolLib/                       # å·¥å…·åº“
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ dataConvert.py            # æ•°æ®è½¬æ¢æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ extended_meshes.py        # æ‰©å±•ç½‘æ ¼ç±»
â”‚   â”‚   â””â”€â”€ hou_plots.py             # Houdiniç»˜å›¾å·¥å…·
â”‚   â”œâ”€â”€ lossLib/                      # æŸå¤±å‡½æ•°åº“
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ attribute_loss.py         # å±æ€§æŸå¤±å‡½æ•°
â”‚   â”‚   â””â”€â”€ blendloss.py             # æ··åˆæŸå¤±å‡½æ•°
â”‚   â”œâ”€â”€ houLib/                       # Houdiniåº“
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ initLib/                      # åˆå§‹åŒ–åº“
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ utilLib/                      # å·¥å…·åº“
â”‚       â””â”€â”€ ...
â”œâ”€â”€ net/                              # ğŸ§  ç¥ç»ç½‘ç»œæ¨¡å—
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ blendshape/
â”‚   â””â”€â”€ topo_landmart/
â”œâ”€â”€ train/                            # ğŸƒ è®­ç»ƒè„šæœ¬
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ blenshape/
â”‚   â”œâ”€â”€ hou_example.py
â”‚   â””â”€â”€ attribute_training_example.py
â”œâ”€â”€ tests/                            # ğŸ§ª æ‰€æœ‰æµ‹è¯•ä»£ç 
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ conftest.py                   # pytesté…ç½®å’Œå…±äº«fixtures
â”‚   â”œâ”€â”€ test_extended_meshes.py       # ExtendedMeshesæµ‹è¯•
â”‚   â”œâ”€â”€ test_attribute_loss.py        # å±æ€§æŸå¤±å‡½æ•°æµ‹è¯•
â”‚   â”œâ”€â”€ test_data_convert.py          # æ•°æ®è½¬æ¢æµ‹è¯•
â”‚   â”œâ”€â”€ test_basic_pytest.py          # åŸºç¡€pytestç¤ºä¾‹
â”‚   â”œâ”€â”€ test_real_world_usage.py      # çœŸå®åœºæ™¯æµ‹è¯•
â”‚   â”œâ”€â”€ test_complete_attribute.py    # å®Œæ•´å±æ€§æµ‹è¯•
â”‚   â”œâ”€â”€ test_attribute_transfer.py    # å±æ€§ä¼ è¾“æµ‹è¯•
â”‚   â”œâ”€â”€ test_improvements.py          # æ”¹è¿›åŠŸèƒ½æµ‹è¯•
â”‚   â””â”€â”€ test_tohoudini_fix.py         # Houdiniä¿®å¤æµ‹è¯•
â”œâ”€â”€ scripts/                          # ğŸ› ï¸ å·¥å…·è„šæœ¬
â”‚   â”œâ”€â”€ check_versions.py             # ç‰ˆæœ¬æ£€æŸ¥è„šæœ¬
â”‚   â””â”€â”€ run_tests.py                  # æµ‹è¯•è¿è¡Œè„šæœ¬
â”œâ”€â”€ docs/                             # ğŸ“š é¡¹ç›®æ–‡æ¡£
â”‚   â”œâ”€â”€ README_TESTING.md             # æµ‹è¯•æŒ‡å—
â”‚   â”œâ”€â”€ PYTHON_COMPATIBILITY.md       # Pythonå…¼å®¹æ€§
â”‚   â”œâ”€â”€ PYTEST_MANUAL.md              # pytestæ‰‹å†Œ
â”‚   â””â”€â”€ PROJECT_STRUCTURE.md          # é¡¹ç›®ç»“æ„è¯´æ˜
â”œâ”€â”€ file/                             # ğŸ“ ç¤ºä¾‹æ–‡ä»¶
â”‚   â””â”€â”€ obj/
â”‚       â””â”€â”€ dolphin.obj
â”œâ”€â”€ requirements.txt                   # ğŸ“¦ é¡¹ç›®ä¾èµ–
â”œâ”€â”€ requirements-minimal.txt           # ğŸ“¦ æœ€å°ä¾èµ–
â”œâ”€â”€ pytest.ini                        # âš™ï¸ pytesté…ç½®
â”œâ”€â”€ README.md                          # ğŸ“– é¡¹ç›®è¯´æ˜
â”œâ”€â”€ LICENSE                            # ğŸ“„ è®¸å¯è¯
â””â”€â”€ .gitignore                         # ğŸš« Gitå¿½ç•¥æ–‡ä»¶
```

## å„ç›®å½•èŒè´£

### ğŸ¯ ç”Ÿäº§ä»£ç ç›®å½•
- **`pyLib/`**: æ ¸å¿ƒåº“ä»£ç ï¼ŒåŒ…å«æ‰€æœ‰å¯é‡ç”¨çš„æ¨¡å—
- **`net/`**: ç¥ç»ç½‘ç»œæ¨¡å‹å®šä¹‰
- **`train/`**: è®­ç»ƒè„šæœ¬å’Œç¤ºä¾‹

### ğŸ§ª æµ‹è¯•ç›¸å…³ç›®å½•
- **`tests/`**: æ‰€æœ‰æµ‹è¯•ä»£ç ï¼ŒåŒ…å«å•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•ç­‰
- **`scripts/`**: å·¥å…·è„šæœ¬ï¼Œå¦‚ç‰ˆæœ¬æ£€æŸ¥ã€æµ‹è¯•è¿è¡Œç­‰

### ğŸ“š æ–‡æ¡£å’Œé…ç½®
- **`docs/`**: é¡¹ç›®æ–‡æ¡£
- **`file/`**: ç¤ºä¾‹æ–‡ä»¶å’Œèµ„æº
- **é…ç½®æ–‡ä»¶**: requirements.txt, pytest.ini ç­‰

## æµ‹è¯•ä»£ç åˆ†ç±»

### 1. **å•å…ƒæµ‹è¯•** (Unit Tests)
```
tests/test_extended_meshes.py      # æµ‹è¯•ExtendedMeshesç±»
tests/test_attribute_loss.py       # æµ‹è¯•æŸå¤±å‡½æ•°
tests/test_data_convert.py         # æµ‹è¯•æ•°æ®è½¬æ¢
```

### 2. **é›†æˆæµ‹è¯•** (Integration Tests)
```
tests/test_real_world_usage.py     # çœŸå®åœºæ™¯æµ‹è¯•
tests/test_complete_attribute.py   # å®Œæ•´å±æ€§æµç¨‹æµ‹è¯•
```

### 3. **ç¤ºä¾‹æµ‹è¯•** (Example Tests)
```
tests/test_basic_pytest.py         # pyteståŸºç¡€ç¤ºä¾‹
tests/test_improvements.py         # åŠŸèƒ½æ”¹è¿›æµ‹è¯•
```

### 4. **ä¿®å¤æµ‹è¯•** (Fix Tests)
```
tests/test_tohoudini_fix.py        # ç‰¹å®šbugä¿®å¤æµ‹è¯•
tests/test_attribute_transfer.py   # å±æ€§ä¼ è¾“ä¿®å¤æµ‹è¯•
```

## å‘½ä»¤æ›´æ–°

ç”±äºæ–‡ä»¶ç§»åŠ¨ï¼Œå‘½ä»¤ä¹Ÿéœ€è¦æ›´æ–°ï¼š

### è¿è¡Œæµ‹è¯•
```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
C:"\Program Files\Side Effects Software\Houdini 20.5.613\bin"\hython.exe -m pytest tests/ -v

# è¿è¡Œç‰¹å®šæµ‹è¯•
C:"\Program Files\Side Effects Software\Houdini 20.5.613\bin"\hython.exe -m pytest tests/test_extended_meshes.py -v

# è¿è¡ŒåŸºç¡€ç¤ºä¾‹
C:"\Program Files\Side Effects Software\Houdini 20.5.613\bin"\hython.exe -m pytest tests/test_basic_pytest.py -v
```

### è¿è¡Œå·¥å…·è„šæœ¬
```bash
# æ£€æŸ¥ç‰ˆæœ¬
C:"\Program Files\Side Effects Software\Houdini 20.5.613\bin"\hython.exe scripts/check_versions.py

# è¿è¡Œæµ‹è¯•è„šæœ¬
python scripts/run_tests.py --houdini
```

## æœ€ä½³å®è·µ

### 1. **æµ‹è¯•æ–‡ä»¶å‘½å**
- æµ‹è¯•æ–‡ä»¶ä»¥ `test_` å¼€å¤´
- æµ‹è¯•ç±»ä»¥ `Test` å¼€å¤´
- æµ‹è¯•æ–¹æ³•ä»¥ `test_` å¼€å¤´

### 2. **æµ‹è¯•ç»„ç»‡**
- ä¸€ä¸ªæ¨¡å—å¯¹åº”ä¸€ä¸ªæµ‹è¯•æ–‡ä»¶
- ç›¸å…³çš„æµ‹è¯•æ”¾åœ¨åŒä¸€ä¸ªæµ‹è¯•ç±»ä¸­
- ä½¿ç”¨æè¿°æ€§çš„æµ‹è¯•åç§°

### 3. **ä¾èµ–ç®¡ç†**
- ç”Ÿäº§ä¾èµ–æ”¾åœ¨ `requirements.txt`
- æµ‹è¯•ä¾èµ–ä¹Ÿæ”¾åœ¨ `requirements.txt` ä½†æ ‡æ³¨æ¸…æ¥š
- ä½¿ç”¨ `requirements-minimal.txt` åªåŒ…å«æ ¸å¿ƒä¾èµ–

### 4. **æ–‡æ¡£ç»´æŠ¤**
- åœ¨ `docs/` ç›®å½•ç»´æŠ¤é¡¹ç›®æ–‡æ¡£
- æµ‹è¯•ç›¸å…³æ–‡æ¡£ä¹Ÿæ”¾åœ¨ `docs/` ä¸­
- ä¿æŒæ–‡æ¡£ä¸ä»£ç åŒæ­¥

## éƒ¨ç½²æ—¶çš„è€ƒè™‘

### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²
```bash
# åªéƒ¨ç½²ç”Ÿäº§ä»£ç 
rsync -av --exclude='tests/' --exclude='scripts/' --exclude='docs/' . production/
```

### å¼€å‘ç¯å¢ƒè®¾ç½®
```bash
# å®‰è£…å®Œæ•´ä¾èµ–ï¼ˆåŒ…æ‹¬æµ‹è¯•å·¥å…·ï¼‰
pip install -r requirements.txt

# è®¾ç½®å¼€å‘ç¯å¢ƒ
export PYTHONPATH="${PYTHONPATH}:$(pwd)"
```

è¿™æ ·çš„ç»“æ„ç¡®ä¿äº†ï¼š
âœ… ç”Ÿäº§ä»£ç å’Œæµ‹è¯•ä»£ç å®Œå…¨åˆ†ç¦»  
âœ… é¡¹ç›®ç»“æ„æ¸…æ™°æ˜“æ‡‚  
âœ… ä¾¿äºç»´æŠ¤å’Œéƒ¨ç½²  
âœ… éµå¾ªä¸šç•Œæœ€ä½³å®è·µ 